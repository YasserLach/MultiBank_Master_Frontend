<div class=" relative">
  <app-navbar></app-navbar>
  <div class="  lg:pt-16  mb-12">
    <!-- The cover -->
    <div class=" relative drop-shadow-2xl">
      <img src="assets/admin-accounts.jpg" class="w-full h-auto bg-opacity-50 object-cover">
      <div class="absolute top-1/4 flex justify-center w-full">
        <div class="">
          <p class=" text-white font-bold text-center text-xl md:text-6xl font-poppins text-shadow shadow-gray-200">Manage bank accounts.</p>
          <p class=" text-white text-center text-sm md:text-xl font-bold font-poppins text-shadow shadow-gray-200  mt-2 md:mt-6 "> Discover the list of bank accounts</p>
          <div class=" flex justify-center mt-2 sm:mt-7 ">
            <button class=" bg-gray-100 p-1 sm:p-2  rounded-full hover:shadow-2xl hover:shadow-white">
              <a href="/accounts#table">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 sm:w-6 sm:h-6 text-blue-300 hover:text-shadow hover:shadow-blue-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 5.25l-7.5 7.5-7.5-7.5m15 6l-7.5 7.5-7.5-7.5" />
                </svg>
              </a>
            </button>
          </div>

        </div>
      </div>
    </div>

    <section>
      <div class=" bg-orange-500 m-4 sm:m-12 rounded-md sm:py-2 drop-shadow-2xl">
        <p class=" text-white font-dancing font-bold text-2xl sm:text-4xl text-center">Bank accounts</p>
      </div>

      <div class=" border-2 border-orange-500 rounded-md mx-12 p-2 drop-shadow-2xl">
      <p class=" font-poppins ">Presented below is the roster of user bank accounts within the Atlas Bank application. In your role as an administrator, you possess the authority to review this account list and undertake the removal of accounts as deemed necessary</p>
      </div>


      <!-- The table -->
      <div class=" my-14" *ngIf="!appState.dataState.loading" >
        <!-- component -->
        <section id="table" class="container  mx-auto">
          <div class="flex flex-col">
            <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
              <div class="inline-block min-w-full py-2 align-middle ">
                <div class="overflow-hidden border border-gray-500 md:rounded-lg ">
                  <table class="min-w-full divide-y divide-gray-500  drop-shadow-2xl">
                    <thead class="bg-gray-100">
                    <tr>
                      <th scope="col" class="py-3.5 px-4 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Account number
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Owner
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Balance
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Currency
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Status
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Type
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        Interest rate
                      </th>
                      <th scope="col" class="px-4 py-3.5 text-sm font-poppins text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        OverDraft
                      </th>
                      <th scope="col" class="relative py-3.5 px-4">
                        <span class="sr-only">Delete</span>
                      </th>
                    </tr>
                    </thead>
                    <tbody class="bg-gray-400 divide-y divide-gray-200 ">

                    <tr *ngFor="let account of appState.dataState.accounts.bankAccountDtos">
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white  whitespace-nowrap">
                        {{account.id}}
                      </td>
                      <td class="px-4 py-4 text-sm  whitespace-nowrap">
                        <div class="inline-flex items-center px-3 py-1 rounded-full gap-x-2 bg-white text-blue-300  font-poppins ">
                          <h2 class="text-sm font-bold">{{account.customerDto.name}}</h2>
                        </div>
                      </td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.balance}}</td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.currency}}</td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.status}}</td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.typeAccount.substring(37,51)}}</td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.interestRate}}</td>
                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">{{account.overDraft}}</td>

                      <td class="px-4 py-4 text-sm font-bold font-poppins text-white whitespace-nowrap">
                        <div class=" bg-white rounded-full py-1 px-1 w-fit">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                               (click)="showPopUp(account.id)"
                         class="w-6 h-6 text-red-600 hover:cursor-pointer hover:text-red-200 duration-200">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                        </svg>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-center mt-6">
            <div class="items-center hidden md:flex gap-x-3">
              <a *ngFor="let page of [].constructor(this.appState.dataState.accounts.totalPages);let i=index" (click)="handleGoToPage(i)"
                 class="  rounded-md px-2 py-1 hover:cursor-pointer text-white"
                 [class] = "this.appState.dataState.currentPage==(i)?'bg-blue-200':' bg-gray-200'"
              >{{i+1}}</a>
            </div>
          </div>
        </section>
      </div>






    </section>



  </div>
</div>
<div class=" bg-black bg-opacity-70 absolute  top-0 z-10 w-full flex justify-center items-center h-full" *ngIf="isShown">
  <div class=" bg-white rounded-md drop-shadow-2xl px-8 py-4">
    <p class=" text-xl font-poppins font-bold text-center mt-2">Do you confirm your decision to delete the following bank account? </p>
    <video class=" mt-4 h-80 w-full" autoplay loop muted src="assets/deleted2.mp4"></video>
    <div class="flex justify-between mt-6">
      <button class=" bg-orange-500 rounded-md px-2 py-1 font-bold text-white hover:text-shadow hover:shadow-orange-300 hover:shadow-lg duration-200" (click)="isShown = !isShown">Cancel</button>
      <button class=" bg-orange-500 rounded-md px-2 py-1 font-bold text-white hover:text-shadow hover:shadow-orange-300 hover:shadow-lg duration-200" (click)="deleteUser()">Delete</button>
    </div>

  </div>
</div>

<div class="  " *ngIf="appState.dataState.loading">
  <video autoplay loop muted src="assets/loading2.mp4" class=""></video>
</div>

<app-footer></app-footer>
